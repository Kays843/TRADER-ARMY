<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Trade Army | Pro Terminal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Tüm cihazlar için dokunmatik ve fare optimizasyonu */
        * { 
            -webkit-tap-highlight-color: transparent; 
            touch-action: manipulation; 
        }
        body { 
            background-color: #0c0d10; 
            color: #d1d4dc; 
            overflow: hidden; 
            height: 100dvh; 
            margin: 0;
            display: flex;
            flex-direction: column;
        }
        #chart-grid { 
            display: grid; 
            height: 100%; 
            width: 100%; 
            gap: 1px; 
            background-color: #1e222d; 
        }
        .grid-1 { grid-template-columns: 1fr; }
        .grid-2 { grid-template-columns: 1fr 1fr; }
        .grid-4 { grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; }
        
        /* Grafiklerin dokunmatik hassasiyeti */
        iframe { 
            pointer-events: auto !important; 
            touch-action: auto !important;
        }

        /* Telefonlar için yan menüyü gizleme veya küçültme ayarı */
        @media (max-width: 768px) {
            .sidebar { display: none; } /* Mobilde yan menü gizlenir (alan açmak için) */
            .top-panel span { font-size: 14px; }
            .layout-controls { display: none; } /* Mobilde çoklu ekranı gizle (ekran küçük) */
        }

        .sidebar-item { transition: all 0.2s; cursor: pointer; border-left: 3px solid transparent; }
        .sidebar-item:hover { background-color: #2a2e39; border-left-color: #2962ff; color: white; }
        .layout-btn { background: #1e222d; border: 1px solid #2a2e39; padding: 6px 14px; border-radius: 4px; font-size: 12px; color: #81858e; }
        .layout-btn.active { background: #2962ff; color: white; }
    </style>
</head>
<body>

    <div class="h-10 border-b border-[#1e222d] bg-[#131722] shrink-0">
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
        { "symbols": [{"proName": "BINANCE:BTCUSDT", "title": "BTC"}, {"proName": "BINANCE:ETHUSDT", "title": "ETH"}, {"proName": "FX:USDTRY", "title": "USD/TRY"}], "colorTheme": "dark", "isTransparent": true, "locale": "tr" }
        </script>
    </div>

    <div class="h-14 border-b border-[#1e222d] bg-[#131722] flex items-center justify-between px-4 shrink-0 top-panel">
        <div class="flex items-center space-x-3">
            <span class="text-blue-500 font-extrabold text-xl italic tracking-tighter">TRADE <span class="text-white">ARMY</span></span>
            <div class="h-6 w-[1px] bg-gray-800 hidden md:block"></div>
            <span class="text-[10px] text-gray-500 font-mono hidden md:block" id="current-asset-name">BINANCE:BTCUSDT</span>
        </div>
        
        <div class="layout-controls flex items-center space-x-2 bg-[#0c0d10] p-1 rounded">
            <button onclick="changeLayout(1, this)" class="layout-btn active">1</button>
            <button onclick="changeLayout(2, this)" class="layout-btn">2</button>
            <button onclick="changeLayout(4, this)" class="layout-btn">4</button>
        </div>
    </div>

    <div class="flex flex-1 overflow-hidden">
        <aside class="sidebar w-52 border-r border-[#1e222d] bg-[#131722] flex flex-col overflow-y-auto shrink-0">
            <div class="p-3 text-[10px] font-bold text-gray-500 uppercase tracking-widest">Favoriler</div>
            <div onclick="updateSymbol('BINANCE:BTCUSDT')" class="sidebar-item p-3 text-sm text-gray-400">Bitcoin</div>
            <div onclick="updateSymbol('BINANCE:ETHUSDT')" class="sidebar-item p-3 text-sm text-gray-400">Ethereum</div>
            <div onclick="updateSymbol('TVC:GOLD')" class="sidebar-item p-3 text-sm text-gray-400">Ons Altın</div>
            <div onclick="updateSymbol('FX:USDTRY')" class="sidebar-item p-3 text-sm text-gray-400">Dolar/TL</div>
        </aside>

        <main class="flex-1 bg-black">
            <div id="chart-grid" class="grid-1">
                <div id="tv_chart_1" class="w-full h-full"></div>
                <div id="tv_chart_2" class="w-full h-full hidden"></div>
                <div id="tv_chart_4" class="w-full h-full hidden"></div>
            </div>
        </main>
    </div>

    <footer class="h-8 border-t border-[#1e222d] bg-[#0c0d10] flex items-center justify-between px-4 text-[10px] text-gray-500 shrink-0 z-50">
        <div class="flex items-center space-x-2">
            <span class="text-blue-500 font-bold">TRADE ARMY</span>
            <span class="hidden md:inline text-gray-700">| © 2026 Tüm Hakları Saklıdır</span>
        </div>
        <div class="flex items-center space-x-2">
            <span class="text-yellow-600 font-bold">!</span>
            <span>Yatırım tavsiyesi değildir.</span>
        </div>
    </footer>

    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script>
        let currentSymbol = 'BINANCE:BTCUSDT';
        let activeCount = 1;

        function initChart(id, symbol) {
            new TradingView.widget({
                "autosize": true,
                "symbol": symbol,
                "interval": "240",
                "timezone": "Etc/UTC",
                "theme": "dark",
                "style": "1",
                "locale": "tr",
                "toolbar_bg": "#131722",
                "enable_publishing": false,
                "hide_side_toolbar": false,
                "allow_symbol_change": true,
                "save_image": true,
                "container_id": id,
                "enabled_features": [
                    "header_resolutions", 
                    "header_indicators", 
                    "header_settings", 
                    "header_symbol_search",
                    "header_chart_type",
                    "side_toolbar_in_fullscreen_mode"
                ],
                "overrides": {
                    "paneProperties.background": "#131722"
                }
            });
        }

        function changeLayout(count, btn) {
            activeCount = count;
            document.getElementById('chart-grid').className = `grid-${count}`;
            document.querySelectorAll('.layout-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            for(let i=1; i<=4; i++) {
                const el = document.getElementById(`tv_chart_${i}`);
                if(!el) continue;
                if(i <= count) { el.classList.remove('hidden'); initChart(`tv_chart_${i}`, currentSymbol); }
                else { el.classList.add('hidden'); el.innerHTML = ""; }
            }
        }

        function updateSymbol(s) {
            currentSymbol = s;
            const nameEl = document.getElementById('current-asset-name');
            if(nameEl) nameEl.innerText = s;
            for(let i=1; i<=4; i++) {
                const el = document.getElementById(`tv_chart_${i}`);
                if(el && !el.classList.contains('hidden')) initChart(`tv_chart_${i}`, s);
            }
        }

        window.onload = () => initChart('tv_chart_1', currentSymbol);
    </script>
</body>
</html>
