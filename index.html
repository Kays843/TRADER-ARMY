<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>TRADE ARMY | V.1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        html, body { background: #0c0d10; margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; position: fixed; color: #d1d4dc; font-family: 'Inter', sans-serif; }
        
        #chart-grid { display: grid; height: 100%; width: 100%; gap: 1px; background: #1e222d; }
        .grid-1 { grid-template-columns: 1fr; }
        .grid-2 { grid-template-columns: 1fr 1fr; }
        .grid-4 { grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; }

        /* LOGO VE MARKA */
        .brand-logo { height: 38px; width: auto; object-fit: contain; }

        .control-btn { background: #1e222d; color: #81858e; border: 1px solid #2a2e39; padding: 5px 12px; border-radius: 4px; font-size: 11px; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .active-layout { background: #2962ff !important; color: white !important; }
        .replay-btn { background: #f23645 !important; color: white !important; border: none; }
        .replay-btn:hover { background: #d9212e !important; box-shadow: 0 0 15px rgba(242, 54, 69, 0.4); }

        .side-panel { width: 300px; background: #131722; border-left: 1px solid #1e222d; display: flex; flex-direction: column; }
        @media (max-width: 1024px) { .side-panel { display: none; } }

        .icon-btn { font-size: 18px; color: #81858e; transition: 0.2s; cursor: pointer; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 6px; }
        .icon-btn:hover { color: #2962ff; background: #1e222d; }

        iframe { pointer-events: auto !important; }
    </style>
</head>
<body class="flex flex-col">

    <header class="h-16 border-b border-[#1e222d] bg-[#131722] flex items-center justify-between px-4 shrink-0 z-50">
        <div class="flex items-center space-x-4">
            <img src="BURAYA_LOGO_URL" alt="Logo" class="brand-logo" onerror="this.style.display='none'">
            
            <div class="flex flex-col">
                <span class="text-white font-black italic text-lg tracking-tighter">TRADE ARMY</span>
                <span class="text-blue-500 text-[10px] font-bold tracking-[3px]">V.1</span>
            </div>

            <div class="flex space-x-1 bg-black/20 p-1 rounded border border-gray-800 ml-4">
                <button onclick="changeLayout(1, this)" class="control-btn active-layout">1</button>
                <button onclick="changeLayout(2, this)" class="control-btn">2</button>
                <button onclick="changeLayout(4, this)" class="control-btn">4</button>
            </div>
        </div>

        <div class="flex items-center space-x-3">
            <button onclick="openReplay()" class="control-btn replay-btn">‚è≥ REPLAY MODU</button>
            <button onclick="toggleColorPanel()" class="control-btn">üé® TEMA</button>
            <div id="active-symbol-text" class="text-[10px] font-mono text-gray-500 bg-black/40 px-2 py-1 rounded">NASDAQ:IXIC</div>
        </div>
    </header>

    <div class="flex flex-1 overflow-hidden relative">
        <aside class="w-14 border-r border-[#1e222d] bg-[#0c0d10] flex flex-col items-center py-4 space-y-4 shrink-0">
            <button onclick="updateSymbol('NASDAQ:IXIC')" title="Nasdaq" class="icon-btn">üìà</button>
            <button onclick="updateSymbol('FX:EURUSD')" title="EUR/USD" class="icon-btn">üá™üá∫</button>
            <button onclick="updateSymbol('BINANCE:BTCUSDT')" title="BTC" class="icon-btn">‚Çø</button>
            <button onclick="updateSymbol('TVC:GOLD')" title="Altƒ±n" class="icon-btn">üü°</button>
        </aside>

        <main class="flex-1 bg-black overflow-hidden">
            <div id="chart-grid" class="grid-1">
                <div id="tv_1" class="w-full h-full"></div>
                <div id="tv_2" class="w-full h-full hidden"></div>
                <div id="tv_3" class="w-full h-full hidden"></div>
                <div id="tv_4" class="w-full h-full hidden"></div>
            </div>
        </main>

        <aside class="side-panel shrink-0">
            <div class="h-1/2 border-b border-[#1e222d]">
                <div class="p-3 text-[10px] font-bold text-gray-500 uppercase tracking-widest bg-black/20">Takip Listesi</div>
                <div id="watchlist" class="h-full">
                    </div>
            </div>
            <div class="h-1/2">
                <div class="p-3 text-[10px] font-bold text-gray-500 uppercase tracking-widest bg-black/20">Piyasa Haberleri</div>
                <div id="news" class="h-full">
                    </div>
            </div>
        </aside>
    </div>

    <footer class="h-10 bg-black border-t border-gray-900 flex items-center justify-between px-6 text-[9px] text-gray-500 shrink-0">
        <div>TRADE ARMY <span class="text-blue-500 font-bold ml-1">V.1</span> | ¬© 2026</div>
        <div class="flex items-center space-x-2">
            <span class="text-red-500 font-bold">YASAL UYARI:</span>
            <span>Yatƒ±rƒ±m tavsiyesi deƒüildir.</span>
        </div>
    </footer>

    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script>
        let currentSymbol = 'NASDAQ:IXIC';
        let currentCount = 1;

        function openReplay() {
            // Replay √∂zelliƒüi sadece ana sitede √ßalƒ±≈ütƒ±ƒüƒ± i√ßin kullanƒ±cƒ±yƒ± ilgili paritenin replay sayfasƒ±na y√∂nlendirir
            const url = `https://www.tradingview.com/chart/?symbol=${currentSymbol.replace(':', '%3A')}`;
            window.open(url, '_blank');
        }

        function initChart(id, symbol) {
            new TradingView.widget({
                "autosize": true,
                "symbol": symbol,
                "interval": "240",
                "theme": "dark",
                "style": "1",
                "locale": "tr",
                "toolbar_bg": "#131722",
                "enable_publishing": false,
                "hide_side_toolbar": false,
                "allow_symbol_change": true,
                "withdateranges": true, // Ge√ßmi≈üe d√∂n√º≈ü i√ßin tarih aralƒ±ƒüƒ± eklendi
                "container_id": id,
                "overrides": {
                    "paneProperties.background": "#131722"
                }
            });
        }

        function changeLayout(count, btn) {
            currentCount = count;
            document.getElementById('chart-grid').className = `grid-${count}`;
            document.querySelectorAll('.control-btn').forEach(b => b.classList.remove('active-layout'));
            if(btn) btn.classList.add('active-layout');
            for (let i = 1; i <= 4; i++) {
                const el = document.getElementById(`tv_${i}`);
                if (i <= count) { el.classList.remove('hidden'); initChart(`tv_${i}`, currentSymbol); }
                else { el.classList.add('hidden'); el.innerHTML = ""; }
            }
        }

        function updateSymbol(s) {
            currentSymbol = s;
            document.getElementById('active-symbol-text').innerText = s;
            for (let i = 1; i <= currentCount; i++) initChart(`tv_${i}`, s);
        }

        window.onload = () => initChart('tv_1', currentSymbol);
    </script>
</body>
</html>
