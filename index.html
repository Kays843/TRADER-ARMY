<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>TraderArmy Pro Charts</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://s3.tradingview.com/tv.js"></script>

<style>
body {
    margin:0;
    background:#0e0e0e;
    color:white;
    font-family: Arial;
}

header {
    background:#111;
    padding:10px;
    border-bottom:1px solid #222;
    display:flex;
    gap:10px;
    flex-wrap:wrap;
}

button, select {
    background:#1a1a1a;
    color:white;
    border:1px solid #333;
    padding:6px 10px;
    border-radius:4px;
}

#charts {
    display:grid;
    height: calc(100vh - 130px);
    gap:5px;
}

.chart-box {
    border:1px solid #222;
    display:flex;
    flex-direction:column;
}

.toolbar {
    background:#111;
    border-bottom:1px solid #222;
    padding:5px;
    display:flex;
    gap:5px;
}

footer {
    background:#111;
    color:#888;
    text-align:center;
    padding:12px;
    font-size:13px;
    border-top:1px solid #222;
    position:fixed;
    bottom:0;
    left:0;
    width:100%;
}
</style>
</head>

<body>

<header>
    <strong>TraderArmy PRO</strong>
    <button onclick="setLayout(1)">1 Grafik</button>
    <button onclick="setLayout(2)">2 Grafik</button>
    <button onclick="setLayout(4)">4 Grafik</button>

    <select id="pairSelect">
        <optgroup label="Forex">
            <option value="FX:EURUSD">EURUSD</option>
            <option value="FX:GBPUSD">GBPUSD</option>
            <option value="FX:USDJPY">USDJPY</option>
            <option value="FX:XAUUSD">XAUUSD</option>
            <option value="FX:USDCAD">USDCAD</option>
        </optgroup>

        <optgroup label="Kripto">
            <option value="BINANCE:BTCUSDT">BTC/USDT</option>
            <option value="BINANCE:ETHUSDT">ETH/USDT</option>
            <option value="BINANCE:XRPUSDT">XRP/USDT</option>
            <option value="BINANCE:ADAUSDT">ADA/USDT</option>
        </optgroup>

        <optgroup label="Endeks">
            <option value="OANDA:SPX500USD">S&P 500</option>
            <option value="OANDA:NAS100USD">NASDAQ 100</option>
            <option value="OANDA:UK100GBP">FTSE 100</option>
        </optgroup>
    </select>
</header>

<div id="charts"></div>

<footer>
⚠️ Yasal Uyarı: Bu platform yatırım tavsiyesi içermez. Tüm işlemler risk içerir, sorumluluk kullanıcıya aittir.
</footer>

<script>
let layout = 1;

function setLayout(n){
    layout = n;
    renderCharts();
}

function renderCharts(){
    const area = document.getElementById("charts");
    area.innerHTML = "";

    if(layout === 1){
        area.style.gridTemplateColumns = "1fr";
        area.style.gridTemplateRows = "1fr";
    }
    if(layout === 2){
        area.style.gridTemplateColumns = "1fr 1fr";
        area.style.gridTemplateRows = "1fr";
    }
    if(layout === 4){
        area.style.gridTemplateColumns = "1fr 1fr";
        area.style.gridTemplateRows = "1fr 1fr";
    }

    for(let i=0; i<layout; i++){
        const box = document.createElement("div");
        box.className = "chart-box";

        const toolbar = document.createElement("div");
        toolbar.className = "toolbar";

        toolbar.innerHTML = `
            <button onclick="changeSymbol(${i})">Sembol Uygula</button>
            <button onclick="setIntervalTF(${i}, '1')">1m</button>
            <button onclick="setIntervalTF(${i}, '5')">5m</button>
            <button onclick="setIntervalTF(${i}, '15')">15m</button>
            <button onclick="setIntervalTF(${i}, '60')">1H</button>
            <button onclick="setIntervalTF(${i}, '240')">4H</button>
            <button onclick="setIntervalTF(${i}, 'D')">1D</button>
        `;

        box.appendChild(toolbar);

        const chartDiv = document.createElement("div");
        chartDiv.id = "chart" + i;
        chartDiv.style.height = "100%";
        box.appendChild(chartDiv);

        area.appendChild(box);

        new TradingView.widget({
            container_id: "chart" + i,
            autosize: true,
            symbol: "FX:EURUSD",
            interval: "5",
            timezone: "Europe/Istanbul",
            theme: "dark",
            style: "1",
            locale: "tr",
            hide_side_toolbar: false,
            withdateranges: true,
        });
    }
}

function changeSymbol(i){
    let sym = document.getElementById("pairSelect").value;
    new TradingView.widget({
        container_id: "chart" + i,
        autosize: true,
        symbol: sym,
        interval: "5",
        timezone: "Europe/Istanbul",
        theme: "dark",
        locale: "tr",
        hide_side_toolbar: false,
    });
}

function setIntervalTF(i, tf){
    let sym = document.getElementById("pairSelect").value;
    new TradingView.widget({
        container_id: "chart" + i,
        autosize: true,
        symbol: sym,
        interval: tf,
        timezone: "Europe/Istanbul",
        theme: "dark",
        locale: "tr",
    });
}

renderCharts();
</script>

</body>
</html>
